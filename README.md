## homework 00

## 修改gradio窗口布局

修改gradio窗口布局，完成全部作业后发布公网链接让朋友试用。

## 增加AR demo

https://docs.opencv.org/4.x/dc/d2c/tutorial_real_time_pose.html
参考上面链接，修改代码。实现gdut校徽，贴人头上。有AR仿射变换效果。

## 调用增加新的facial landmark detection模型

增加一个模型 Torchlm人脸检测库 :https://github.com/DefTruth/torchlm
新建一个tab： “models comparison”页。
要求UI为4窗口：1原图视频，1个原视频上叠加mediapipe68点， 1个叠加Torchlm 68点， 1个叠加2个模型的对应点连线（线的长度反应了2个模型的定位差异）SSSSSS

# 文件说明

## 一、Gradio 窗口布局修改与公网部署

### 1. 界面布局设计

在原有 Gradio 应用的基础上，对前端界面布局进行了系统性的调整与优化，主要包括：

* 使用 `gradio.Tab` 对功能模块进行分区，提升整体可读性与使用体验；
* 不同功能模块之间逻辑清晰、互不干扰，便于用户快速理解与操作；
* 视频流显示区域采用多窗口并排布局，便于结果对比与观察。

最终界面包含多个功能页（Tabs），其中包括：

* **主功能演示页**
* **AR Demo 页面**
* **Models Comparison（模型对比）页面**

### 2. 公网链接发布

在完成全部功能实现后，通过 Gradio 提供的公网分享机制（`share=True`），成功生成公网访问链接，使得非本地用户也可以直接通过浏览器访问并试用系统功能，满足“发布公网链接让朋友试用”的作业要求。

---

## 二、AR Demo：基于人脸姿态估计的增强现实效果

### 1. 技术参考与实现思路

整体流程如下：

1. 从摄像头获取实时视频流；
2. 进行人脸检测与人脸关键点定位；
3. 利用 2D–3D 点对应关系，通过 `solvePnP` 估计人头的三维姿态（旋转向量与平移向量）；
4. 构建仿射 / 投影变换矩阵；
5. 将虚拟物体进行空间变换并叠加到人脸区域。

### 2. GDUT 校徽 AR 叠加效果

在本项目中，将 **GDUT 校徽** 作为虚拟物体进行叠加，实现了如下效果：

* 校徽随人头运动实时变化位置与姿态；
* 支持旋转、平移等仿射变换；
* 校徽自然“贴合”在人头上，具备明显的增强现实（AR）视觉效果。

该功能在视频流中实时运行，具有良好的稳定性和交互性。

---

## 三、人脸关键点检测模型扩展与对比分析

### 1. 新增 Torchlm 人脸关键点检测模型

在原有 MediaPipe 人脸关键点检测模型的基础上，引入了新的深度学习模型库：

该模型支持高精度的人脸关键点检测，并能够输出 68 个标准人脸关键点，用于与 MediaPipe 模型进行对比分析。

---

### 2. Models Comparison 页面设计

新增 **“Models Comparison”** 标签页，用于多模型结果的可视化对比。该页面采用  **四窗口并行 UI 设计** ，具体如下：

1. **原始视频窗口**
   * 显示未经任何处理的原始摄像头视频流；
2. **MediaPipe 68 点结果窗口**
   * 在原视频基础上叠加 MediaPipe 输出的 68 个面部关键点；
3. **Torchlm 68 点结果窗口**
   * 在原视频基础上叠加 Torchlm 输出的 68 个面部关键点；
4. **模型差异对比窗口**
   * 同时显示两种模型对应的关键点；
   * 对每一对对应关键点绘制连线；
   * 连线长度直观反映两种模型在该关键点位置上的预测差异大小。

---

### 3. 输出结果展示

![c14834ba2e4c50a3f30fffb16c34c889](assets/c14834ba2e4c50a3f30fffb16c34c889.png)

![52461d11d0875b89230b4db22fa63b25](assets/52461d11d0875b89230b4db22fa63b25.png)

![c83a89b35a7ca9b6e2fa0617365c1a6b](assets/c83a89b35a7ca9b6e2fa0617365c1a6b.png)

---

## 四、总结

本次 Homework 00 完成了以下主要工作：

* 完成了 Gradio 前端界面的模块化重构与布局优化，并成功发布公网访问链接；
* 基于 OpenCV 姿态估计实现了实时 AR Demo，并将 GDUT 校徽自然叠加至人头区域；
* 引入 Torchlm 人脸关键点检测模型，与 MediaPipe 模型进行并行对比；
* 设计并实现了四窗口模型对比界面，直观展示不同模型的关键点预测差异。

整体系统具有良好的交互性、可扩展性和展示效果，能够较好地满足课程作业的功能与展示要求。
